---
title: Hadoop体系-HDFS
date: 2018-09-20 22:14:27
tags: [Big Data, Hadoop, HDFS]
categories: Hadoop
respository: git@github.com:Gfeather/feather.git
branch: master
---

*Data-driven production value*

## HDFS
*版本：HDFS1.0*
#### 体系结构
名称节点——数据节点
名称节点：提供元数据服务
HDFS与传统文件系统一样，只有一个命名空间，包含目录、文件、块
客户端从名称节点获得元数据，再到数据节点读写数据
通信协议：
基于TCP/IP协议，客户端——名称节点：TCP/IP,名称节点——数据节点：特定的传输协议，数据节点——客户端：RPC（客户端就是Hadoop库）
1.0局限：命名空间限制，名称节点能够存储的元数据有限，限制集群存储文件数量。
性能瓶颈，系统吞吐量被名称节点吞吐量限制。
隔离性，只有一个命名空间，所有应用都可以访问全部文件。
可用性，名称节点存在单点故障问题，secondarynode冷备无法热切换。
#### 存储原理

通过冗余来保证容错性，一般为三副本，系统会维持副本存活数量。
1，可以并行访问
2，多副本冗余检错
3，可靠性
存放策略，文件副本块分布，本机器一份，本机架其他机器一份，相邻机架一份，更多副本随机分配
读取策略，就近读取
错误与恢复：
名称节点出错，从secondarynode恢复
数据节点出错，从副本恢复，
数据出错，校验码检错，从副本恢复

#### 数据读写

{% asset_img hdfs.png  %}